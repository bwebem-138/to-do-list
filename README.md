# ğŸ”’ Secure Todo List Application

A secure task management application built with Flask and MariaDB, featuring encrypted data storage, user authentication, and HTTPS support.

## ğŸ¯ Features

- âœ… Secure user authentication
- ğŸ” Encrypted database storage
- ğŸ“ Task management
- ğŸ‘¤ User account controls
- ğŸ”’ HTTPS support
- ğŸ³ Docker deployment

## ğŸ› ï¸ Technology Stack

| Component | Technology |
|-----------|------------|
| Backend | Python/Flask |
| Database | MariaDB (Encrypted) |
| Server | Gunicorn |
| SSL | Self-signed |
| Containerization | Docker |
| Frontend | HTML/CSS |

## âš ï¸ Security Notice

**CRITICAL:** Before deploying this application, run the automated setup script which will:
- Generate secure random passwords
- Create the encryption keyfile
- Set up MariaDB encryption configuration
- Generate the .env file with all required variables
- Create self-signed SSL certificates
- Configure HTTPS support
- Start Docker containers

## ğŸ“¦ Installation

1. Clone the repository:
   ```powershell
   git clone https://github.com/bwebem-138/to-do-list.git
   cd to-do-list
   ```

2. Run the setup script as Administrator:
   ```powershell (admin)
   .\setup-automated.ps1
   ```

   âš ï¸ **Important Setup Notes:**
   - Pay careful attention to the certificate password when it's displayed
   - Copy the password exactly as shown - it will be needed for the 'Import Password' prompt
   - If you enter the wrong password, delete the `ssl` folder and `.env` file, then run the setup script again

   ğŸ³ **Docker Container Notes:**
   - The initial `docker compose up` might show an error for `todo_mariadb` - this is normal
   - The database container needs time to initialize before the web container can connect
   - After setup completes, manually restart the web container:
     ```powershell
     docker compose up -d todo_flask
     ```

3. Access the application:
   - Open https://localhost:443 in your browser
   - Use the generated credentials from your `.env` file

## ğŸ”‘ Certificate Management

If you need to regenerate certificates:
1. Delete the `ssl` folder and `.env` file
2. Run `.\setup-automated.ps1` again
3. Make sure to save the new certificate password when it's displayed

## ğŸ—ï¸ Project Structure

```
to-do-list/
â”œâ”€â”€ app/                        # Application code
â”‚   â”œâ”€â”€ static/                # Static assets
â”‚   â”‚   â””â”€â”€ styles.css
â”‚   â”œâ”€â”€ templates/             # HTML templates
â”‚   â”‚   â”œâ”€â”€ base.html
â”‚   â”‚   â”œâ”€â”€ login.html
â”‚   â”‚   â”œâ”€â”€ register.html
â”‚   â”‚   â””â”€â”€ tasks.html
â”‚   â”œâ”€â”€ app.py                # Main application file
â”‚   â””â”€â”€ requirements.txt      # Python dependencies
â”œâ”€â”€ config/                   # Configuration directory
â”‚   â”œâ”€â”€ mysql/               # MySQL specific config
â”‚   â”‚   â””â”€â”€ encryption/     # Encryption settings
â”‚   â”‚       â””â”€â”€ keyfile    # Database encryption key
â”‚   â””â”€â”€ encryption.cnf     # MariaDB encryption config
â”œâ”€â”€ ssl/                    # SSL certificates
â”‚   â”œâ”€â”€ cert.pem           # Public certificate
â”‚   â”œâ”€â”€ key.pem            # Private key
â”‚   â””â”€â”€ certificate.pfx    # PKCS#12 bundle
â”œâ”€â”€ database.sql           # Database schema
â”œâ”€â”€ docker-compose.yml     # Docker configuration
â”œâ”€â”€ Dockerfile            # Application container
â”œâ”€â”€ generate-env.ps1     # Security setup script
â”œâ”€â”€ generate-certs.ps1   # SSL certificate generator
â”œâ”€â”€ .env                 # Environment variables (generated)
â”œâ”€â”€ .gitignore          # Git ignore rules
â””â”€â”€ README.md           # Project documentation
```

## âš™ï¸ Configuration Files

### Database Encryption
- `config/mysql/encryption/keyfile`: Contains the encryption key for MariaDB
- `config/encryption.cnf`: MariaDB encryption configuration

### Environment Variables
The `.env` file (generated by generate-env.ps1) contains:
```ini
# Database Configuration
MYSQL_HOST=db
MYSQL_ROOT_PASSWORD=<generated>
MYSQL_USER=todo_user
MYSQL_PASSWORD=<generated>
MYSQL_DATABASE=todo_db

# Flask Configuration
FLASK_APP=app.py
FLASK_SECRET_KEY=<generated>
FLASK_DEBUG=0
FLASK_HOST=0.0.0.0
FLASK_PORT=443

# SSL Configuration
SSL_CERT_PATH=/ssl/cert.pem
SSL_KEY_PATH=/ssl/key.pem
SSL_PFX_PATH=/ssl/certificate.pfx
CERT_PASSWORD=<generated>
CERT_DOMAIN=todolist.ch
CERT_FRIENDLY_NAME=todolist.ch SSL Certificate

# Encryption Configuration
DB_ENCRYPTION_KEY=<generated>

# Domain Configuration
DOMAIN_NAME=todolist.ch
```

## ğŸŒ Access

- HTTPS: https://localhost:443
- Domain: https://yourdomain.com (if configured)

## âš ï¸ Disclaimer

This code is provided as an educational example and should not be used in production environments without proper security review.

*Remember to replace all default credentials before deployment!*
*Remember to never commit sensitive files (.env, keyfile, SSL certificates) to version control!*